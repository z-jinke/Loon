#!name = 哔哩哔哩
#!desc = 屏蔽客户端广告
#!icon = https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/App-Icon/BilibiliPink.png
#!date = 2025-08-27

[Rewrite]
^https:\/\/api\.bilibili\.com\/x\/vip\/ads\/materials\? mock-response-body data-type=json data="{}" status-code=200
^https:\/\/(grpc\.biliapi\.net|app\.bilibili\.com)\/bilibili\.app\.interface\.v1\.Teenagers\/ModeStatus$ mock-response-body data-type=base64 data="AAAAABMKEQgCEgl0ZWVuYWdlcnMgAioA" data-is-base64=true status-code=200
^https:\/\/(grpc\.biliapi\.net|app\.bilibili\.com)\/bilibili\.app\.view\.v1\.View\/TFInfo$ mock-response-body data-type=base64 data="AAAAAAIIAQ==" data-is-base64=true status-code=200
^https:\/\/grpc\.biliapi\.net\/bilibili\.app\.view\.v1\.View\/TFInfo$ mock-response-body data-type=base64 data="AAAAAAIIAQ==" mock-data-is-base64=true

[Script]
http-response ^https:\/\/(app\.bilibili\.com\/x\/v2\/splash\/|app\.bilibili\.com\/x\/v2\/search|app\.bilibili\.com\/x\/v2\/feed\/index|app\.bilibili\.com\/x\/resource\/show\/tab|app\.bilibili\.com\/x\/v2\/account\/mine|api\.bilibili\.com\/x\/pd-proxy\/tracker|api\.bilibili\.com\/pgc\/view\/v2\/app\/season|api\.live\.bilibili\.com\/xlive|app\.bilibili\.com\/x\/v2\/feed\/index\/story) script-path=https://github.com/z-jinke/Loon/raw/refs/heads/main/Js/bilibili.js, requires-body=true, timeout=10, tag=配置处理
http-response ^https:\/\/(grpc\.biliapi\.net|app\.bilibili\.com)\/bilibili\.(app\.(show\.v1\.Popular\/Index|dynamic\.v2\.Dynamic\/DynAll|view(unite)?\.v1\.View\/(View|ViewProgress|RelatesFeed)|playurl\.v1\.PlayURL\/PlayView|playerunite\.v1\.Player\/PlayViewUnite)|polymer\.app\.search\.v1\.Search\/SearchAll|community\.service\.dm\.v1\.DM\/DmView|main\.community\.reply\.v1\.Reply\/MainList|pgc\.gateway\.player\.v2\.PlayURL\/PlayView)$ script-path=https://raw.githubusercontent.com/kokoryh/Sparkle/master/dist/bilibili.protobuf.response.js, requires-body=true, binary-body-mode=true, timeout=10, tag=广告处理

[MitM]
hostname = grpc.biliapi.net, app.bilibili.com, api.bilibili.com, api.live.bilibili.com
