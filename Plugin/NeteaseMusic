#!name = 网易云音乐
#!desc = 屏蔽客户端广告
#!icon = https://raw.githubusercontent.com/sooyaaabo/Loon/main/Icon/App-Icon/NeteaseMusic.png
#!date = 2025-08-29

[Argument]
MY = switch, true, false, tag = 移除漫游
DT = switch, true, false, tag = 移除笔记
GZ = switch, true, false, tag = 移除关注

[Rewrite]
http-response ^https:\/\/(?:ipv4|interface\d?)\.music\.163\.com\/(?:e?api\/(ocpc\/)?ad\/|w?e?api\/search\/default) mock-response-body data-type=text
http-response ^https:\/\/(?:ipv4|interface\d?)\.music\.163\.com\/(?:eapi|weapi)\/(?:delivery\/(batch-)?deliver|moment\/tab\/info\/|side-bar\/mini-program\/music-service\/account|yunbei\/account\/entrance\/|community\/friends\/fans-group\/artist\/group\/|mine\/applet\/redpoint|music\/songshare\/text\/recommend\/|resniche\/position\/play\/new\/|resniche\/tspopup\/show|resource\/comments?\/musiciansaid\/|user\/sub\/artist|ios\/version|mlivestream\/entrance\/playpage\/|link\/position\/show\/strategy|link\/scene\/show\/resource|v1\/content\/exposure\/comment\/banner\/|activity\/bonus\/playpage\/time\/query|resource-exposure\/|search\/(?:chart\/|rcmd\/keyword\/|specialkeyword\/)|my\/podcast\/tab\/recommend) reject-dict

[Script]
http-response ^https:\/\/(?:ipv4|interface\d?)\.music\.163\.com\/eapi\/(link\/page\/discovery\/resource\/show|batch|v2\/resource\/comment\/floor\/get) script-path=https://raw.githubusercontent.com/sooyaaabo/Loon/main/Script/NeteaseMusic/NeteaseMusicAds.js, requires-body=true, binary-body-mode=true, timeout=10, tag=广告处理
http-response ^https:\/\/(?:ipv4|interface\d?)\.music\.163\.com\/eapi\/link\/home\/framework\/tab script-path=https://raw.githubusercontent.com/sooyaaabo/Loon/main/Script/NeteaseMusic/NeteaseMusicAds.js, requires-body=true, binary-body-mode=true, timeout=10, tag=配置处理, argument=[{MY},{DT},{GZ}]

[MitM]
hostname = interface*.music.163.com,ipv4.music.163.com
